@let tooltipWidth = 180;
<div class="airport-time origin">
  @if (origin(); as originData) {
    <h6
      class="m-0"
      [tooltip]="departFromTemplate"
      [tooltipMaxWidth]="tooltipWidth"
      [tooltipDirection]="'top'"
    >
      <span class="airport-code">{{ originData.iataCode }}</span>
      <span>&nbsp;-&nbsp;</span>
      <span class="time">{{
        originData.scheduledDateTime | dateFormat : "time"
      }}</span>
    </h6>
    <small class="date">{{
      originData.scheduledDateTime | dateFormat : "preset" : "DATE_MED"
    }}</small>
    <ng-template #departFromTemplate>
      {{ originData?.city }}, ({{ originData?.iataCode }}) {{ originData?.airportName }}
    </ng-template>
  } @else {
    <div class="placeholder">Loading...</div>
  }
</div>

<div class="duration">
  <div class="m-0 total-duration">
    <span [tooltip]="'Total Duration'" [tooltipDirection]="'top'">{{ journeyTime() }}</span>
  </div>

  @if(layovers().length > 0) {
    <div class="layover-strip">
      <small>{{ layovers().length }} Stop{{ layovers().length > 1 ? "s" : ""}} at</small>
      @for(layover of layovers(); track layover; let i = $index) {
        <span class="pill" [tooltip]="getLayoverTooltip(i)" [tooltipDirection]="'top'" [tooltipMaxWidth]="tooltipWidth">
          {{ layover.arrival.iataCode }}
        </span>
      }
    </div>
  }
</div>
<div class="airport-time destination">
  @if (destination(); as destinationData) {
    <h6
      class="m-0"
      [tooltip]="departToTemplate"
      [tooltipMaxWidth]="tooltipWidth"
      [tooltipDirection]="'top'"
    >
      <span class="airport-code">{{ destination().iataCode }}</span>
      <span>&nbsp;-&nbsp;</span>
      <span class="time">{{
        destination().scheduledDateTime | dateFormat : "time"
      }}</span>
    </h6>
    <small class="date">{{
      destination().scheduledDateTime | dateFormat : "preset" : "DATE_MED" }}
    </small>
    <ng-template #departToTemplate>
      {{ destinationData?.city }}, ({{ destinationData?.iataCode }}) {{ destinationData?.airportName }}
    </ng-template>
  }
  @else {
    <div class="placeholder">Loading...</div>
  }

</div>
